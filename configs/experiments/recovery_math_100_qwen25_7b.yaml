_base_: ../base.yaml

pipeline:
  task_adapter: math_ps
  benchmark: competition_math_ps
  memory_builder: arcmemo_ps
  memory_retriever: lesson_topk
  trajectory_policy: single_path
  provider: llmplus_openrouter
  inference_engine: math_ps_solve
  feedback_engine: math_ps_gt
  evaluator: math_ps_exec
  artifact_sink: json_local

run:
  run_type: recovery_math_100_qwen25_7b
  seed: 42
  max_passes: 2
  execution_mode: arc_batch
  retry_criterion: test
  retry_policy:
    max_passes: 2
    criterion: test
    error_feedback: all
    num_feedback_passes: 1
    include_past_outcomes: true

components:
  task_adapter:
    task_name: math_ps
  benchmark:
    data_root: /root/workspace/data/hf/qwedsacf__competition_math
    split: train
    types:
      - "Number Theory"
      - "Counting & Probability"
    limit: 100
    require_integer_answer: true
  memory_builder:
    max_entries: 50
  memory_retriever:
    top_k: 2
  trajectory_policy:
    retry_paths: 1
  provider:
    profile_name: llmplus_openrouter
    dotenv_path: /root/arc/mem2/.env.example
    default_max_concurrency: 32
  inference_engine:
    model: qwen/qwen-2.5-7b-instruct
    gen_cfg:
      n: 1
      temperature: 0.3
      max_tokens: 2048
      top_p: 1.0
      batch_size: 32
      seed: 42
      ignore_cache: true
      expand_multi: null
    error_feedback: all
    num_feedback_passes: 1
    include_past_outcomes: true
    include_reselected_lessons: false
    prompt_options: null
  feedback_engine: {}
  evaluator:
    timeout_s: 10.0
    require_all_tests: null
  artifact_sink: {}
